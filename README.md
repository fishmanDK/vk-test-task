
<img width="1838" alt="Снимок экрана 2024-03-19 в 02 32 06" src="https://github.com/fishmanDK/vk-test-task/assets/119760881/d5529c65-4636-4b07-98c6-4232ea8c987b">

# vk-test-task

Этот репозиторий содержит проект `vk-test-task`, который является бэкенд приложение "Фильмотека". Проект написан на языке Go и использует PostgreSQL в качестве базы данных.

## Структура проекта

- **cmd/**: Содержит исполняемый файл `vk-test-task/main.go`, который является точкой входа в приложение.
- **config/**: Содержит конфигурационные файлы для приложения.
- **docs/**: Документация проекта.
- **internal/**: Внутренние пакеты приложения.
- **schema/**: Схемы для миграции базы данных.
- **.gitignore**: Файл, указывающий Git игнорировать определенные файлы и директории.
- **Dockerfile**: Определяет образ Docker для сборки приложения.
- **docker-compose.yml**: Файл для определения и запуска многоконтейнерных Docker приложений.
- **entrypoint.sh**: Скрипт для инициализации базы данных и выполнения миграций.
- **wait-for-postgres.sh**: Скрипт для ожидания доступности PostgreSQL перед запуском приложения.

## Зависимости

- Go 1.21.1
- PostgreSQL
- Docker

## Установка и запуск

1. **Клонирование репозитория**:
```bash
    git clone https://github.com/fishmanDK/vk-test-task.git cd vk-test-task
```


2. **Сборка Docker образа**:

```bash 
    docker build -t vk-test-task .
```


3. **Запуск приложения с помощью Docker Compose**:

```bash 
    docker-compose up --build app
```

Это запустит приложение вместе с PostgreSQL в контейнерах. Если оно не запустилось, то попробуйте выполнить команду еще раз.  [Подробнее об этом](https://docs.docker.com/compose/startup-order/)

## База данных
<img width="1576" alt="Снимок экрана 2024-03-19 в 02 34 01" src="https://github.com/fishmanDK/vk-test-task/assets/119760881/a66ea07b-f62b-433b-b6f1-439ac5aa1630">

Проект `vk-test-task` использует PostgreSQL в качестве системы управления базами данных (СУБД).

### Установка и настройка PostgreSQL с помощью Docker

Для упрощения разработки и развертывания, PostgreSQL запускается в контейнере Docker. Это обеспечивает изолированную среду для работы с базой данных, что упрощает процесс установки и конфигурации.

#### Шаги для настройки PostgreSQL с помощью Docker:

1. **Установка Docker**: Убедитесь, что Docker установлен на вашей системе. Если нет, установите Docker, следуя инструкциям на [официальном сайте Docker](https://www.docker.com/get-started).

2. **Запуск контейнера PostgreSQL**: Используйте `docker-compose.yml` файл в проекте для запуска контейнера PostgreSQL. Выполните команду `docker-compose up` в корневой директории проекта.

3. **Подключение к базе данных**: Для подключения к базе данных используйте клиент PostgreSQL, например, [DbVisualizer](https://www.dbvis.com/). Подключитесь к базе данных, используя следующие параметры:
   - Host: `localhost`
   - Port: `5432`
   - Database: `postgres` (или имя вашей базы данных)
   - Username: `postgres` (или ваше имя пользователя)
   - Password: `mysecretpassword` (или ваш пароль)

#### Миграции базы данных

Миграции базы данных находятся в директории `schema/`. Для применения миграций используйте утилиту `migrate/migrate`, которая автоматически применяет миграции к базе данных при запуске контейнера.

### Преимущества использования PostgreSQL с Docker

- **Изолированная среда**: Docker обеспечивает изолированную среду для работы с базой данных, что упрощает процесс установки и конфигурации.
- **Простота использования**: Не требуется установка и настройка PostgreSQL на вашей системе, достаточно запустить контейнер Docker.
- **Гибкость**: Docker позволяет легко переключаться между различными версиями PostgreSQL и обеспечивает изоляцию между разными проектами.

### Дополнительные ресурсы

- [Официальный сайт PostgreSQL](https://www.postgresql.org/)
- [Docker Hub для PostgreSQL](https://hub.docker.com/_/postgres)

Этот раздел предоставляет основную информацию о настройке и использовании PostgreSQL в проекте `vk-test-task` с помощью Docker.
